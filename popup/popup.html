<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1" />
		<title>Smart Shopper</title>
		<style>
			:root {
				--background: #fafafa;
				--foreground: #1f1f1f;
				--primary-color: #4c8bf5;
				--primary-hover: color-mix(in oklab, var(--primary-color), var(--background) 90%);
				--success: #1da462;
				--warning: #ffcd46;
				--error: #dd5144;
				--scroll-gray: #888;
				--disabled-bg: #d3d3d3;
				--disabled-text: #777;
				--border: #aaa;
				--font-size-base: 16px;
				--spacing-base: 12px;
				--radius-base: 8px;
				--table-max-height: 200px;
				--shadow: rgba(99, 99, 99, 0.2) 0px 2px 8px 0px;
			}
			* {
				margin: 0;
				padding: 0;
				scrollbar-width: thin;
				scrollbar-color: var(--primary-color) var(--background);
			}
			::-webkit-scrollbar {
				width: 6px;
			}
			::-webkit-scrollbar-track {
				background: var(--background);
				border-radius: 3px;
			}
			::-webkit-scrollbar-thumb {
				background-color: var(--scroll-gray);
				border-radius: 3px;
				border: 1px solid var(--border);
			}
			::-webkit-scrollbar-thumb:hover {
				background-color: var(--scroll-gray);
			}
			body {
				font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
				width: 600px;
				padding: var(--spacing-base);
				color: var(--foreground);
				background: var(--background);
			}
			.logo-container {
				display: flex;
				flex-direction: column;
				align-items: center;
				justify-content: center;
				margin-bottom: var(--spacing-base);
				cursor: default;
			}
			.logo-image {
				height: 24px;
				width: 24px;
			}
			.title {
				font-size: var(--font-size-base);
			}
			button {
				width: 100%;
				padding: 6px;
				font-size: var(--font-size-base);
				border: none;
				border-radius: var(--radius-base);
				background-color: var(--primary-color);
				color: var(--background);
				cursor: pointer;
				box-shadow: var(--shadow);
			}
			button:disabled {
				background-color: var(--disabled-bg);
				border-color: var(--border);
				cursor: not-allowed;
			}
			#summarize-button {
				margin-top: var(--spacing-base);
			}
			.table-wrapper {
				outline: 1px solid var(--border);
				border-radius: 8px;
				overflow-x: hidden;
				max-height: var(--table-max-height);
				margin-top: var(--spacing-base);
				box-shadow: var(--shadow);
			}
			table {
				border-collapse: collapse;
				display: block;
				overflow-x: auto;
			}
			table .disabled {
				color: var(--disabled-text);
			}
			table .disabled input[type="checkbox"] {
				cursor: not-allowed;
			}
			table tr:last-child td {
				border-bottom: none !important;
			}
			thead {
				position: sticky;
				top: 0;
				background: var(--background);
				z-index: 10;
				font-weight: bold;
			}
			tr {
				max-width: 100%;
				overflow: hidden; /* hide overflow */
				cursor: default;
			}
			tbody tr:hover {
				background-color: var(--primary-hover);
			}
			td {
				line-clamp: 2;
				border-bottom: 1px solid var(--border);
				padding: 6px;
			}
			tr td:nth-child(1) {
				width: 100%;
			}
			.truncate-multiline {
				display: -webkit-box;
				line-clamp: 2;
				-webkit-line-clamp: 2;
				-webkit-box-orient: vertical;
				overflow: hidden;
				text-overflow: ellipsis;
				line-height: 1.4em;
				max-height: calc(1.4em * 2);
			}
			#loading {
				margin-top: var(--spacing-base);
				display: none;
				align-items: center;
				gap: 4px;
				font-size: var(--font-size-base);
			}
			.loading-spinner {
				height: 32px;
				width: 32px;
				fill: var(--primary-color);
				animation: spin 0.8s linear infinite;
			}
			.checkmark-container {
				display: block;
				position: relative;
				cursor: pointer;
				width: 24px;
				height: 24px;
			}
			.checkmark {
				display: none;
			}
			.checkmark-inner {
				display: inline-block;
				width: 24px;
				height: 24px;
				border-radius: 50%;
				border: 1px solid var(--border);
				background: transparent no-repeat center;
			}
			.checkmark:checked + .checkmark-inner {
				border-color: var(--primary-color);
				background-color: var(--primary-color);
				background-image: url("data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='14px' height='10px' viewBox='0 0 14 10' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3C!-- Generator: Sketch 59.1 (86144) - https://sketch.com --%3E%3Ctitle%3Echeck%3C/title%3E%3Cdesc%3ECreated with Sketch.%3C/desc%3E%3Cg id='Page-1' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='ios_modification' transform='translate(-27.000000, -191.000000)' fill='%23FFFFFF' fill-rule='nonzero'%3E%3Cg id='Group-Copy' transform='translate(0.000000, 164.000000)'%3E%3Cg id='ic-check-18px' transform='translate(25.000000, 23.000000)'%3E%3Cpolygon id='check' points='6.61 11.89 3.5 8.78 2.44 9.84 6.61 14 15.56 5.05 14.5 4'%3E%3C/polygon%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
			}
			.disabled > .checkmark-inner {
				outline-color: var(--border);
				cursor: not-allowed;
			}
			.disabled > .checkmark:checked + .checkmark-inner {
				background-color: var(--disabled-bg);
				border-color: var(--border);
				cursor: not-allowed;
			}
			#summary-container {
				display: none;
				margin-top: var(--spacing-base);
			}
			#summary-content {
				margin-top: var(--spacing-base);
				display: flex;
				flex-direction: column;
				gap: var(--spacing-base);
			}
			#comparison-container {
				display: none;
				margin-top: var(--spacing-base);
			}
			#comparison-content {
				margin-top: var(--spacing-base);
				line-height: 1.6;
				color: var(--foreground, #1f1f1f);
			}
			#comparison-content ul {
				margin-left: 36px;
				list-style: disc;
			}
			.card {
				background: var(--background);
				border: 1px solid var(--border);
				border-radius: 8px;
				padding: var(--spacing-base);
				box-shadow: var(--shadow);
			}
			.summary-header {
				font-weight: 600;
				display: flex;
				flex-direction: column;
				gap: 8px;
			}
			.product-header-top {
				display: flex;
				justify-content: space-between;
				align-items: center;
				flex-wrap: wrap;
				gap: 8px;
			}
			.value-score-badge {
				padding: 4px 12px;
				border-radius: 12px;
				font-size: 12px;
				font-weight: 600;
				display: inline-flex;
				align-items: center;
				gap: 6px;
			}
			.value-score-badge.score-excellent {
				background-color: #1da462;
				color: white;
			}
			.value-score-badge.score-good {
				background-color: #4c8bf5;
				color: white;
			}
			.value-score-badge.score-fair {
				background-color: #ffcd46;
				color: #1f1f1f;
			}
			.value-score-badge.score-poor {
				background-color: #dd5144;
				color: white;
			}
			.value-score-label {
				font-size: 11px;
				opacity: 0.9;
			}
			.value-score-value {
				font-size: 14px;
				font-weight: 700;
			}
			.price-info {
				display: flex;
				align-items: center;
				gap: 12px;
				flex-wrap: wrap;
			}
			.price-value {
				font-size: 18px;
				font-weight: 700;
				color: var(--primary-color);
			}
			.price-alert {
				padding: 4px 8px;
				border-radius: 6px;
				font-size: 12px;
				font-weight: 600;
			}
			.price-alert.drop {
				background-color: #e8f5e9;
				color: #1da462;
			}
			.price-alert.increase {
				background-color: #fff3e0;
				color: #ff9800;
			}
			.rating-info {
				font-size: 14px;
				color: #666;
				display: flex;
				align-items: center;
				gap: 4px;
			}
			.summary-body {
				margin-top: 6px;
			}
			.summary-item {
				margin-left: 24px;
			}
			.tool-tip-wrapper {
				position: fixed;
				width: 100%;
				z-index: 1000;
				transition: opacity 0.3s;
			}
			.tool-tip-warning {
				display: none;
			}
			.tool-tip-icon {
				padding: 2px;
				width: 24px;
				height: 24px;
				background-color: var(--background);
				position: absolute;
				outline: 1px solid var(--border);
				border-radius: var(--radius-base);
				box-shadow: var(--shadow);
			}
			.tool-tip-warning-icon {
				right: 24px;
			}
			.tooltip-box {
				position: absolute;
				top: 24px;
				max-height: 150px;
				padding: 4px;
				margin-top: 6px;
				border: 1px solid var(--border);
				border-radius: var(--radius-base);
				box-shadow: var(--shadow);
				overflow: auto;
				display: none;
				scrollbar-color: var(--error) var(--background);
			}
			#tooltip-box-warning {
				right: 24px;
				background: var(--error);
				color: var(--background);
			}
			#tooltip-box-info {
				background: var(--background);
				color: var(--foreground);
			}
			.tooltip-list {
				list-style-type: disc;
				padding: 6px;
				margin: 0;
			}
			.tooltip-list li {
				margin-left: 12px;
				margin-bottom: 6px;
			}
			.instructions h3 {
				margin-bottom: var(--spacing-base);
			}
			.instructions li {
				margin-left: 24px;
				margin-bottom: 6px;
			}
			.hidden {
				opacity: 0;
				pointer-events: none;
			}
			@keyframes shimmer {
				0% {
					background-position: -200% 0;
				}
				100% {
					background-position: 200% 0;
				}
			}
			@keyframes spin {
				to {
					transform: rotate(360deg);
				}
			}
			.export-buttons {
				display: flex;
				gap: 8px;
				margin-top: var(--spacing-base);
				flex-wrap: wrap;
			}
			.export-btn {
				flex: 1;
				min-width: 120px;
				padding: 8px 12px;
				font-size: 13px;
				background-color: var(--background);
				border: 1px solid var(--border);
				color: var(--foreground);
				cursor: pointer;
				border-radius: var(--radius-base);
				transition: all 0.2s;
			}
			.export-btn:hover:not(:disabled) {
				background-color: var(--primary-color);
				color: white;
				border-color: var(--primary-color);
			}
			.export-btn:active:not(:disabled) {
				transform: scale(0.98);
			}
			.export-notification {
				position: fixed;
				bottom: 20px;
				left: 50%;
				transform: translateX(-50%) translateY(100px);
				background-color: var(--success);
				color: white;
				padding: 12px 24px;
				border-radius: var(--radius-base);
				box-shadow: var(--shadow);
				z-index: 10000;
				opacity: 0;
				transition: all 0.3s ease;
				font-weight: 600;
			}
			.export-notification.show {
				opacity: 1;
				transform: translateX(-50%) translateY(0);
			}
		</style>
	</head>
	<body>
		<div class="tool-tip-wrapper tool-tip-warning">
			<svg
				class="tool-tip-icon tool-tip-warning-icon"
				viewBox="0 0 32 32"
				xmlns="http://www.w3.org/2000/svg"
				fill="none"
				stroke="#dd5144">
				<g id="SVGRepo_bgCarrier" stroke-width="0"></g>
				<g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
				<g id="SVGRepo_iconCarrier">
					<path
						stroke="#dd5144"
						stroke-linecap="round"
						stroke-linejoin="round"
						stroke-width="2"
						d="M15.12 4.623a1 1 0 011.76 0l11.32 20.9A1 1 0 0127.321 27H4.679a1 1 0 01-.88-1.476l11.322-20.9zM16 18v-6"></path>
					<path fill="#dd5144" d="M17.5 22.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z"></path>
				</g>
			</svg>
			<div class="tooltip-box" id="tooltip-box-warning">
				<ul class="tooltip-list" id="tooltip-list"></ul>
			</div>
		</div>
		<div class="tool-tip-wrapper tool-tip-info">
			<svg
				class="tool-tip-icon tool-tip-info-icon"
				viewBox="0 0 24 24"
				fill="none"
				xmlns="http://www.w3.org/2000/svg"
				stroke="#4c8bf5">
				<g id="SVGRepo_bgCarrier" stroke-width="0"></g>
				<g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
				<g id="SVGRepo_iconCarrier">
					<path
						d="M12 19H12.01M8.21704 7.69689C8.75753 6.12753 10.2471 5 12 5C14.2091 5 16 6.79086 16 9C16 10.6565 14.9931 12.0778 13.558 12.6852C12.8172 12.9988 12.4468 13.1556 12.3172 13.2767C12.1629 13.4209 12.1336 13.4651 12.061 13.6634C12 13.8299 12 14.0866 12 14.6L12 16"
						stroke="#4c8bf5"
						stroke-width="2"
						stroke-linecap="round"
						stroke-linejoin="round"></path>
				</g>
			</svg>
			<div class="tooltip-box" id="tooltip-box-info">
				<ul class="tooltip-list instructions" id="tooltip-list">
					<h3>How to use:</h3>
					<li>Open the products you want to compare, each in its own browser tab.</li>
					<li>Deselect any tabs you don&apos;t want included in the comparison.</li>
					<li>Click “Summarize & Compare Tabs.”</li>
					<li>
						Wait a few moments, your summaries and comparison results will appear
						automatically.
					</li>
				</ul>
			</div>
		</div>
		<div class="logo-container">
			<img class="logo-image" src="/icon.png" />
			<h1>Smart Shopper</h1>
		</div>
		<h3 class="title">Tabs</h3>
		<div id="table-wrapper-div" class="table-wrapper">
			<table id="tab-table">
				<tbody id="tab-list"></tbody>
			</table>
		</div>
		<button id="summarize-button">Summarize & compare products</button>
		<div id="summary-container">
			<h3 class="title">Summary</h3>
			<div id="summary-content"></div>
		</div>
		<div id="comparison-container">
			<h3 class="title">Comparison</h3>
			<div id="comparison-content" class="card"></div>
		</div>
		<div id="loading">
			<svg
				class="icon loading-spinner"
				fill="#000000"
				viewBox="-7 0 32 32"
				version="1.1"
				xmlns="http://www.w3.org/2000/svg">
				<g id="SVGRepo_bgCarrier" stroke-width="0"></g>
				<g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
				<g id="SVGRepo_iconCarrier">
					<title>loading</title>
					<path
						d="M2.080 14.040l4-1.040c0.44-0.12 0.72-0.56 0.6-1.040-0.12-0.44-0.56-0.72-1.040-0.6l-2.080 0.56c0.68-0.88 1.56-1.6 2.64-2.080 1.64-0.72 3.44-0.76 5.12-0.12 1.64 0.64 2.96 1.92 3.68 3.52 0.2 0.44 0.68 0.6 1.12 0.44 0.44-0.2 0.6-0.68 0.44-1.12-0.88-2.040-2.52-3.6-4.6-4.44-2.080-0.8-4.36-0.76-6.4 0.12-1.36 0.6-2.48 1.52-3.36 2.68l-0.52-1.96c-0.12-0.44-0.56-0.72-1.040-0.6-0.44 0.12-0.72 0.56-0.6 1.040l1.040 4c0.12 0.56 0.4 0.8 1 0.64zM17.72 22.52l-1.040-3.96c0 0-0.16-0.8-0.96-0.6v0l-4 1.040c-0.44 0.12-0.72 0.56-0.6 1.040 0.12 0.44 0.56 0.72 1.040 0.6l2.080-0.56c-1.76 2.32-4.88 3.28-7.72 2.16-1.64-0.64-2.96-1.92-3.68-3.52-0.2-0.44-0.68-0.6-1.12-0.44-0.44 0.2-0.6 0.68-0.44 1.12 0.88 2.040 2.52 3.6 4.6 4.44 1 0.4 2 0.56 3.040 0.56 2.64 0 5.12-1.24 6.72-3.4l0.52 1.96c0.080 0.36 0.44 0.64 0.8 0.64 0.080 0 0.16 0 0.2-0.040 0.4-0.16 0.68-0.6 0.56-1.040z"></path>
				</g>
			</svg>
			<span id="loading-text">Summarizing...</span>
		</div>
		<script src="marked.min.js"></script>
		<script src="popup.js"></script>
	</body>
</html>
